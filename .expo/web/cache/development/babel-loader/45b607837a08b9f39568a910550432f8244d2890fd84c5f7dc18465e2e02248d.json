{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\Tricade\\\\src\\\\views\\\\ProfileScreen.js\";\nimport React, { useState, useEffect, createContext, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RetroButton from '../components/RetroButton';\nimport userPinkIcon from '../assets/user-pink.png';\nimport { auth, db, storage } from '../firebaseConfig';\nimport { updateProfile, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { ref, uploadBytes, getDownloadURL, getStorage } from 'firebase/storage';\nimport * as ImagePicker from 'expo-image-picker';\nimport { doc, getDoc, setDoc, increment, updateDoc } from 'firebase/firestore';\nimport editarRosaIcon from '../assets/editar_rosa.png';\nimport { screenWidth as width, screenHeight as height, wp, hp, SPACING, FONT_SIZES, scaleDimension, scaleFont, getResponsiveDimension } from '../utils/dimensions';\nimport { Audio } from 'expo-av';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AudioContext } from '../../App';\nimport BottomTabBar from '../components/BottomTabBar';\nimport { GAME_SCORES, getExpForLevel, SPECIAL_AVATARS } from '../utils/scoreConfig';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar pixelFont = 'PressStart2P_400Regular';\nvar pixelStroke = [{\n  textShadowOffset: {\n    width: -4,\n    height: 0\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: 4,\n    height: 0\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: 0,\n    height: -4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: 0,\n    height: 4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: -4,\n    height: -4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: 4,\n    height: -4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: -4,\n    height: 4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}, {\n  textShadowOffset: {\n    width: 4,\n    height: 4\n  },\n  textShadowColor: '#000',\n  textShadowRadius: 0\n}];\nvar defaultAvatar = require('../assets/user-pink.png');\nvar avatarOptions = [require('../assets/user-blue.png'), require('../assets/user-pink.png')];\nvar audioOnIcon = require('../assets/audio-on.png');\nvar audioOffIcon = require('../assets/audio-off.png');\nvar audioGame = require('../assets/audio-game.mp3');\nexport var UserCacheContext = createContext();\nexport function useUserCache() {\n  return useContext(UserCacheContext);\n}\nexport default function ProfileScreen(_ref) {\n  var _this = this;\n  var navigation = _ref.navigation,\n    isTab = _ref.isTab;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentUser = _useState2[0],\n    setCurrentUser = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n  var _useState5 = useState(userPinkIcon),\n    _useState6 = _slicedToArray(_useState5, 2),\n    avatar = _useState6[0],\n    setAvatar = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    level = _useState8[0],\n    setLevel = _useState8[1];\n  var _useState9 = useState(0),\n    _useState0 = _slicedToArray(_useState9, 2),\n    exp = _useState0[0],\n    setExp = _useState0[1];\n  var _useState1 = useState(600),\n    _useState10 = _slicedToArray(_useState1, 2),\n    expMax = _useState10[0],\n    setExpMax = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    modalVisible = _useState12[0],\n    setModalVisible = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    editName = _useState14[0],\n    setEditName = _useState14[1];\n  var _useState15 = useState(null),\n    _useState16 = _slicedToArray(_useState15, 2),\n    editAvatar = _useState16[0],\n    setEditAvatar = _useState16[1];\n  var _useState17 = useState(0),\n    _useState18 = _slicedToArray(_useState17, 2),\n    selectedAvatarIndex = _useState18[0],\n    setSelectedAvatarIndex = _useState18[1];\n  var _useState19 = useState(false),\n    _useState20 = _slicedToArray(_useState19, 2),\n    loggingOut = _useState20[0],\n    setLoggingOut = _useState20[1];\n  var _useState21 = useState(null),\n    _useState22 = _slicedToArray(_useState21, 2),\n    userCache = _useState22[0],\n    setUserCache = _useState22[1];\n  var _useContext = useContext(AudioContext),\n    audioOn = _useContext.audioOn,\n    toggleAudio = _useContext.toggleAudio;\n  useEffect(function () {\n    var unsubscribe = onAuthStateChanged(auth, function () {\n      var _ref2 = _asyncToGenerator(function* (user) {\n        if (user) {\n          setCurrentUser(user);\n          var displayName = user.displayName;\n          var userLevel = 0;\n          var userExp = 0;\n          var userDoc = yield getDoc(doc(db, 'users', user.uid));\n          if (userDoc.exists()) {\n            var _data$level, _data$exp;\n            var data = userDoc.data();\n            displayName = data.displayName || displayName;\n            userLevel = (_data$level = data.level) != null ? _data$level : 0;\n            userExp = (_data$exp = data.exp) != null ? _data$exp : 0;\n            if (displayName && user.displayName !== displayName) {\n              yield updateProfile(user, {\n                displayName: displayName\n              });\n            }\n          }\n          setUsername(displayName || '');\n          setEditName(displayName || '');\n          setLevel(userLevel);\n          setExp(userExp);\n          if (user.photoURL) {\n            setAvatar({\n              uri: user.photoURL\n            });\n          } else {\n            setAvatar(userPinkIcon);\n          }\n          setUserCache({\n            uid: user.uid,\n            displayName: displayName,\n            level: userLevel,\n            exp: userExp,\n            photoURL: user.photoURL || null,\n            avatar: user.photoURL ? {\n              uri: user.photoURL\n            } : userPinkIcon\n          });\n        } else {\n          if (!isTab) {\n            navigation.replace && navigation.replace('Login');\n          } else {\n            setCurrentUser(null);\n          }\n          setUserCache(null);\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return function () {\n      unsubscribe();\n    };\n  }, [navigation, isTab]);\n  var activeTab = 'user';\n  if (navigation && navigation.getState) {\n    var route = navigation.getState().routes[navigation.getState().index];\n    if (route && route.name === 'Profile') activeTab = 'user';else if (route && route.name === 'Games') activeTab = 'home';else if (route && route.name === 'Home') activeTab = 'trophy';\n  }\n  var openEdit = function openEdit() {\n    var cache = userCache || {};\n    setEditName(cache.displayName || username);\n    setEditAvatar(cache.avatar || avatar);\n    setModalVisible(true);\n  };\n  var pickImage = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (Platform.OS === 'web') {\n        var input = document.createElement('input');\n        input.type = 'file';\n        input.accept = 'image/*';\n        input.onchange = function () {\n          var _ref4 = _asyncToGenerator(function* (e) {\n            var file = e.target.files[0];\n            if (file) {\n              try {\n                var _storage = getStorage();\n                var storageRef = ref(_storage, `avatars/${currentUser.uid}.jpg`);\n                yield uploadBytes(storageRef, file);\n                var url = yield getDownloadURL(storageRef);\n                yield updateProfile(currentUser, {\n                  photoURL: url\n                });\n                setAvatar({\n                  uri: url\n                });\n                if (currentUser && currentUser.uid) {\n                  yield setDoc(doc(db, 'users', currentUser.uid), {\n                    photoURL: url\n                  }, {\n                    merge: true\n                  });\n                }\n              } catch (error) {\n                console.error('Error al subir la imagen:', error);\n              }\n            }\n          });\n          return function (_x2) {\n            return _ref4.apply(this, arguments);\n          };\n        }();\n        input.click();\n      } else {\n        var result = yield ImagePicker.launchImageLibraryAsync({\n          mediaTypes: ImagePicker.MediaTypeOptions.Images,\n          allowsEditing: true,\n          aspect: [1, 1],\n          quality: 0.7\n        });\n        if (!result.canceled && result.assets && result.assets.length > 0) {\n          var image = result.assets[0];\n          try {\n            var _storage2 = getStorage();\n            var storageRef = ref(_storage2, `avatars/${currentUser.uid}.jpg`);\n            var response = yield fetch(image.uri);\n            var blob = yield response.blob();\n            yield uploadBytes(storageRef, blob);\n            var url = yield getDownloadURL(storageRef);\n            yield updateProfile(currentUser, {\n              photoURL: url\n            });\n            setAvatar({\n              uri: url\n            });\n            if (currentUser && currentUser.uid) {\n              yield setDoc(doc(db, 'users', currentUser.uid), {\n                photoURL: url\n              }, {\n                merge: true\n              });\n            }\n          } catch (error) {\n            console.error('Error al subir la imagen:', error);\n          }\n        }\n      }\n    });\n    return function pickImage() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var saveEdit = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      var newName = editName.trim() ? editName : username;\n      setUsername(newName);\n      setAvatar(editAvatar);\n      setModalVisible(false);\n      yield updateProfile(currentUser, {\n        displayName: newName\n      });\n      if (currentUser && currentUser.uid) {\n        yield setDoc(doc(db, 'users', currentUser.uid), {\n          displayName: newName\n        }, {\n          merge: true\n        });\n      }\n    });\n    return function saveEdit() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  if (!currentUser) {\n    return _jsxDEV(SafeAreaView, {\n      style: {\n        flex: 1,\n        backgroundColor: '#0a0a23'\n      },\n      children: _jsxDEV(View, {\n        style: [styles.root, {\n          justifyContent: 'center',\n          alignItems: 'center'\n        }],\n        children: _jsxDEV(Text, {\n          style: [styles.title].concat(pixelStroke),\n          children: \"Cargando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(UserCacheContext.Provider, {\n    value: userCache,\n    children: _jsxDEV(SafeAreaView, {\n      style: {\n        flex: 1,\n        backgroundColor: '#0a0a23'\n      },\n      children: _jsxDEV(View, {\n        style: styles.root,\n        children: [_jsxDEV(ScrollView, {\n          contentContainerStyle: [styles.scrollContent, {\n            paddingBottom: 120\n          }],\n          showsVerticalScrollIndicator: false,\n          children: [_jsxDEV(Text, {\n            style: [styles.title].concat(pixelStroke),\n            children: \"PERFIL DE USUARIO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.avatarBox,\n            children: _jsxDEV(Image, {\n              source: avatar,\n              style: styles.avatar,\n              resizeMode: \"contain\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.usernameBox,\n            children: _jsxDEV(Text, {\n              style: [styles.username].concat(pixelStroke),\n              children: username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.levelBox,\n            children: [_jsxDEV(View, {\n              style: styles.levelRow,\n              children: [_jsxDEV(Text, {\n                style: styles.levelText,\n                children: [\"Nivel \", level]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 17\n              }, this), _jsxDEV(Text, {\n                style: styles.expText,\n                children: [\"Exp \", exp, \"/\", expMax]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), _jsxDEV(View, {\n              style: styles.expBarBg,\n              children: _jsxDEV(View, {\n                style: [styles.expBarFill, {\n                  width: `${exp / expMax * 100}%`\n                }]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: styles.editBtn,\n            activeOpacity: 0.7,\n            onPress: openEdit,\n            disabled: !currentUser,\n            children: _jsxDEV(View, {\n              style: {\n                flexDirection: 'row',\n                alignItems: 'center',\n                justifyContent: 'center'\n              },\n              children: [_jsxDEV(Text, {\n                style: styles.editBtnText,\n                children: \"Editar perfil\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this), _jsxDEV(Image, {\n                source: editarRosaIcon,\n                style: styles.editIcon,\n                resizeMode: \"contain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: styles.editBtn,\n            activeOpacity: 0.7,\n            onPress: toggleAudio,\n            children: _jsxDEV(View, {\n              style: {\n                flexDirection: 'row',\n                alignItems: 'center',\n                justifyContent: 'center'\n              },\n              children: [_jsxDEV(Text, {\n                style: styles.editBtnText,\n                children: audioOn ? 'Apagar sonido' : 'Encender sonido'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this), _jsxDEV(Image, {\n                source: audioOn ? audioOnIcon : audioOffIcon,\n                style: [styles.editIcon, {\n                  tintColor: audioOn ? '#ff2e7e' : '#aaa'\n                }],\n                resizeMode: \"contain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), !loggingOut && _jsxDEV(RetroButton, {\n            title: \"Salir\",\n            onPress: _asyncToGenerator(function* () {\n              setLoggingOut(true);\n              yield signOut(auth);\n              setLoggingOut(false);\n              if (!isTab) {\n                navigation.replace && navigation.replace('Login');\n              } else {\n                setCurrentUser(null);\n              }\n            }),\n            style: [styles.logoutBtn, {\n              alignSelf: 'center',\n              width: '90%',\n              marginTop: 18\n            }],\n            textStyle: styles.logoutBtnText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), _jsxDEV(Modal, {\n            visible: loggingOut,\n            transparent: true,\n            animationType: \"fade\",\n            children: _jsxDEV(View, {\n              style: styles.loadingOverlay,\n              children: _jsxDEV(View, {\n                style: styles.loadingBox,\n                children: [_jsxDEV(Text, {\n                  style: styles.loadingText,\n                  children: \"Cerrando sesi\\xF3n...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 19\n                }, this), _jsxDEV(View, {\n                  style: {\n                    marginTop: 18\n                  },\n                  children: _jsxDEV(ActivityIndicator, {\n                    size: \"large\",\n                    color: \"#ff2e7e\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), _jsxDEV(Modal, {\n            visible: modalVisible,\n            animationType: \"fade\",\n            transparent: true,\n            onRequestClose: function onRequestClose() {\n              return setModalVisible(false);\n            },\n            children: _jsxDEV(View, {\n              style: styles.modalOverlay,\n              children: _jsxDEV(View, {\n                style: styles.modalBox,\n                children: !username || !avatar ? _jsxDEV(View, {\n                  style: {\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    height: 120\n                  },\n                  children: [_jsxDEV(ActivityIndicator, {\n                    size: \"large\",\n                    color: \"#00fff7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 23\n                  }, this), _jsxDEV(Text, {\n                    style: {\n                      color: '#00fff7',\n                      fontFamily: pixelFont,\n                      marginTop: 18\n                    },\n                    children: \"Cargando perfil...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this) : _jsxDEV(_Fragment, {\n                  children: [_jsxDEV(Text, {\n                    style: [styles.modalTitle].concat(pixelStroke),\n                    children: \"Editar perfil\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 23\n                  }, this), _jsxDEV(View, {\n                    style: styles.modalAvatarRow,\n                    children: avatarOptions.map(function (img, i) {\n                      return _jsxDEV(Pressable, {\n                        onPress: function onPress() {\n                          return setEditAvatar(img);\n                        },\n                        style: [styles.modalAvatarOption, editAvatar === img && styles.modalAvatarActive],\n                        children: _jsxDEV(Image, {\n                          source: img,\n                          style: styles.modalAvatarImg,\n                          resizeMode: \"contain\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 342,\n                          columnNumber: 29\n                        }, _this)\n                      }, i, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 341,\n                        columnNumber: 27\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 23\n                  }, this), _jsxDEV(TextInput, {\n                    style: styles.modalInput,\n                    value: editName,\n                    onChangeText: setEditName,\n                    maxLength: 16,\n                    placeholder: \"Nombre de usuario\",\n                    placeholderTextColor: \"#00fff7\",\n                    autoFocus: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 23\n                  }, this), _jsxDEV(TouchableOpacity, {\n                    onPress: pickImage,\n                    style: styles.editAvatarBtn,\n                    children: _jsxDEV(Text, {\n                      style: styles.editAvatarBtnText,\n                      children: \"Elegir foto de galer\\xEDa\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 23\n                  }, this), _jsxDEV(View, {\n                    style: styles.modalBtnRowColumn,\n                    children: [_jsxDEV(RetroButton, {\n                      title: \"Guardar\",\n                      onPress: saveEdit\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 25\n                    }, this), _jsxDEV(RetroButton, {\n                      title: \"Cancelar\",\n                      onPress: function onPress() {\n                        return setModalVisible(false);\n                      },\n                      style: styles.cancelBtn,\n                      textStyle: styles.cancelBtnText\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), !isTab && _jsxDEV(BottomTabBar, {\n          activeTab: activeTab,\n          onTabPress: function onTabPress(tab) {\n            if (tab === 'trophy') navigation.navigate('Home');\n            if (tab === 'home') navigation.navigate('Games');\n            if (tab === 'user') navigation.navigate('Profile');\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n}\nexport function addTrikiWinExp() {\n  return _addTrikiWinExp.apply(this, arguments);\n}\nfunction _addTrikiWinExp() {\n  _addTrikiWinExp = _asyncToGenerator(function* () {\n    if (!auth.currentUser) return;\n    var userRef = doc(db, 'users', auth.currentUser.uid);\n    var userDoc = yield getDoc(userRef);\n    var exp = 0,\n      level = 0;\n    if (userDoc.exists()) {\n      exp = userDoc.data().exp || 0;\n      level = userDoc.data().level || 0;\n    }\n    exp += GAME_SCORES.triki;\n    var newLevel = level;\n    var expMax = getExpForLevel(newLevel + 1);\n    if (exp >= expMax) {\n      exp -= expMax;\n      newLevel += 1;\n    }\n    var updates = {\n      exp: exp,\n      level: newLevel\n    };\n    var special = SPECIAL_AVATARS.find(function (a) {\n      return a.level === newLevel;\n    });\n    if (special) {\n      updates.photoURL = null;\n      updates.avatarSpecial = special.image;\n    }\n    yield setDoc(userRef, updates, {\n      merge: true\n    });\n    var statsRef = doc(db, 'users', auth.currentUser.uid, 'trikiStats', 'stats');\n    var statsDoc = yield getDoc(statsRef);\n    var prev = {\n      victorias: 0,\n      derrotas: 0\n    };\n    if (statsDoc.exists()) {\n      prev = statsDoc.data();\n    }\n    yield setDoc(statsRef, {\n      victorias: prev.victorias + 1,\n      derrotas: prev.derrotas\n    }, {\n      merge: true\n    });\n    var missionReward = yield checkAndUpdateMissions(auth.currentUser.uid, 'TRIKI', {\n      victorias: prev.victorias + 1,\n      derrotas: prev.derrotas\n    });\n    if (missionReward > 0) {\n      yield updateDoc(userRef, {\n        level: increment(missionReward)\n      });\n    }\n  });\n  return _addTrikiWinExp.apply(this, arguments);\n}\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#0a0a23',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    paddingTop: height * 0.04,\n    paddingBottom: 0,\n    width: '100%',\n    alignSelf: 'center'\n  },\n  title: {\n    color: '#fff',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.07, 22),\n    letterSpacing: 2,\n    marginBottom: height * 0.025,\n    textAlign: 'center'\n  },\n  avatarBox: {\n    borderWidth: width * 0.015,\n    borderColor: '#00fff7',\n    borderRadius: width * 0.08,\n    padding: width * 0.02,\n    backgroundColor: '#23233a',\n    alignSelf: 'center',\n    marginBottom: height * 0.018,\n    shadowColor: '#00fff7',\n    shadowOpacity: 0.45,\n    shadowRadius: 16,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  avatar: {\n    width: Math.min(width * 0.28, 80),\n    height: Math.min(width * 0.28, 80),\n    borderRadius: width * 0.06\n  },\n  usernameBox: {\n    alignSelf: 'center',\n    marginVertical: height * 0.012,\n    borderWidth: width * 0.01,\n    borderColor: '#00fff7',\n    borderRadius: width * 0.03,\n    paddingHorizontal: width * 0.04,\n    paddingVertical: height * 0.01,\n    backgroundColor: '#23233a'\n  },\n  username: {\n    color: '#00fff7',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.055, 18),\n    textAlign: 'center'\n  },\n  levelBox: {\n    width: '90%',\n    alignSelf: 'center',\n    marginVertical: height * 0.018,\n    borderWidth: width * 0.01,\n    borderColor: '#00fff7',\n    borderRadius: width * 0.04,\n    backgroundColor: '#23233a',\n    padding: width * 0.03\n  },\n  levelRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 6\n  },\n  levelText: {\n    color: '#ff2e7e',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.045, 14)\n  },\n  expText: {\n    color: '#ff2e7e',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.035, 12)\n  },\n  expBarBg: {\n    width: '100%',\n    height: Math.max(10, height * 0.015),\n    backgroundColor: '#101926',\n    borderRadius: width * 0.03,\n    overflow: 'hidden',\n    borderWidth: width * 0.008,\n    borderColor: '#ff2e7e'\n  },\n  expBarFill: {\n    height: '100%',\n    backgroundColor: '#ff2e7e',\n    borderRadius: width * 0.03\n  },\n  editBtn: {\n    width: '90%',\n    alignSelf: 'center',\n    marginTop: height * 0.012,\n    marginBottom: height * 0.012,\n    borderWidth: width * 0.01,\n    borderColor: '#00fff7',\n    borderRadius: width * 0.03,\n    backgroundColor: '#101926',\n    paddingVertical: height * 0.018,\n    paddingHorizontal: width * 0.04\n  },\n  editBtnText: {\n    color: '#fff',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.038, 13),\n    textAlign: 'center'\n  },\n  bottomTab: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '94%',\n    backgroundColor: 'transparent',\n    borderRadius: width * 0.045,\n    borderWidth: width * 0.01,\n    borderColor: '#00fff7',\n    paddingVertical: height * 0.012,\n    paddingHorizontal: width * 0.045,\n    alignSelf: 'center',\n    marginTop: 'auto',\n    shadowColor: '#00fff7',\n    shadowOpacity: 0.25,\n    shadowRadius: 10,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  tabBtn: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: height * 0.012,\n    minHeight: 40\n  },\n  tabBtnActive: {\n    borderBottomWidth: 4,\n    borderBottomColor: '#ff2e7e',\n    shadowColor: '#ff2e7e',\n    shadowOpacity: 0.7,\n    shadowRadius: 10,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  tabIcon: {\n    width: width * 0.09,\n    height: width * 0.09\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(10,10,35,0.92)',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  modalBox: {\n    width: Math.min(width * 0.88, 340),\n    backgroundColor: '#23233a',\n    borderRadius: Math.max(18, width * 0.045),\n    borderWidth: 4,\n    borderColor: '#00fff7',\n    padding: 22,\n    alignItems: 'center',\n    shadowColor: '#00fff7',\n    shadowOpacity: 0.45,\n    shadowRadius: 16,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  modalTitle: {\n    color: '#ff2e7e',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.055, 22),\n    marginBottom: 18,\n    textAlign: 'center'\n  },\n  modalAvatarRow: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 18,\n    gap: 12\n  },\n  modalAvatarOption: {\n    borderWidth: 2,\n    borderColor: '#00fff7',\n    borderRadius: 16,\n    padding: 4,\n    marginHorizontal: 6,\n    backgroundColor: '#101926'\n  },\n  modalAvatarActive: {\n    borderColor: '#ff2e7e',\n    backgroundColor: '#18182e',\n    shadowColor: '#ff2e7e',\n    shadowOpacity: 0.7,\n    shadowRadius: 8,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  modalAvatarImg: {\n    width: 48,\n    height: 48,\n    borderRadius: 12\n  },\n  modalInput: {\n    width: '90%',\n    borderWidth: 2,\n    borderColor: '#00fff7',\n    borderRadius: 10,\n    backgroundColor: '#101926',\n    color: '#00fff7',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.045, 18),\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    marginBottom: 18,\n    textAlign: 'center'\n  },\n  modalBtnRowColumn: {\n    flexDirection: 'column',\n    width: '100%',\n    gap: 10,\n    marginTop: 8\n  },\n  editAvatarBtn: {\n    marginTop: 10,\n    marginBottom: 10,\n    paddingVertical: 8,\n    paddingHorizontal: 18,\n    borderRadius: 8,\n    borderWidth: 2,\n    borderColor: '#00fff7',\n    backgroundColor: '#181828',\n    alignSelf: 'center'\n  },\n  editAvatarBtnText: {\n    color: '#00fff7',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.038, 16),\n    textAlign: 'center'\n  },\n  cancelBtn: {\n    backgroundColor: '#ff2e7e',\n    borderColor: '#ff2e7e',\n    marginTop: 6\n  },\n  cancelBtnText: {\n    color: '#fff',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.038, 16),\n    textAlign: 'center'\n  },\n  logoutBtn: {\n    backgroundColor: '#ff2e7e',\n    borderColor: '#ff2e7e',\n    marginTop: 16\n  },\n  logoutBtnText: {\n    color: '#fff',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.038, 16),\n    textAlign: 'center'\n  },\n  loadingOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(10,10,35,0.92)',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  loadingBox: {\n    backgroundColor: '#23233a',\n    borderRadius: 18,\n    borderWidth: 4,\n    borderColor: '#ff2e7e',\n    padding: 32,\n    alignItems: 'center',\n    shadowColor: '#ff2e7e',\n    shadowOpacity: 0.45,\n    shadowRadius: 16,\n    shadowOffset: {\n      width: 0,\n      height: 0\n    }\n  },\n  loadingText: {\n    color: '#ff2e7e',\n    fontFamily: pixelFont,\n    fontSize: Math.min(width * 0.045, 18),\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  editIcon: {\n    width: 28,\n    height: 28,\n    marginLeft: 14,\n    marginBottom: -3\n  },\n  cornerDotTL: {\n    position: 'absolute',\n    top: hp(2.5),\n    left: wp(4),\n    width: scaleDimension(12),\n    height: scaleDimension(12),\n    backgroundColor: '#ff2e7e',\n    borderRadius: scaleDimension(6),\n    zIndex: 2\n  },\n  cornerDotTR: {\n    position: 'absolute',\n    top: hp(2.5),\n    right: wp(4),\n    width: scaleDimension(12),\n    height: scaleDimension(12),\n    backgroundColor: '#00fff7',\n    borderRadius: scaleDimension(6),\n    zIndex: 2\n  },\n  cornerDotBL: {\n    position: 'absolute',\n    bottom: hp(2.5),\n    left: wp(4),\n    width: scaleDimension(12),\n    height: scaleDimension(12),\n    backgroundColor: '#00fff7',\n    borderRadius: scaleDimension(6),\n    zIndex: 2\n  },\n  cornerDotBR: {\n    position: 'absolute',\n    bottom: hp(2.5),\n    right: wp(4),\n    width: scaleDimension(12),\n    height: scaleDimension(12),\n    backgroundColor: '#ff2e7e',\n    borderRadius: scaleDimension(6),\n    zIndex: 2\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: height * 0.04\n  },\n  audioContainer: {\n    width: '100%',\n    alignItems: 'center',\n    paddingVertical: 10,\n    backgroundColor: '#0a0a23',\n    borderBottomWidth: 1,\n    borderBottomColor: '#18182e'\n  },\n  audioButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '90%',\n    backgroundColor: '#18182e',\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#00fff7',\n    padding: 12\n  },\n  audioText: {\n    color: '#fff',\n    fontFamily: pixelFont,\n    fontSize: 20\n  },\n  audioIcon: {\n    width: 32,\n    height: 32,\n    marginLeft: 8\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","View","Text","StyleSheet","Image","Dimensions","TouchableOpacity","Modal","TextInput","Pressable","Platform","SafeAreaView","ActivityIndicator","ScrollView","RetroButton","userPinkIcon","auth","db","storage","updateProfile","onAuthStateChanged","signOut","ref","uploadBytes","getDownloadURL","getStorage","ImagePicker","doc","getDoc","setDoc","increment","updateDoc","editarRosaIcon","screenWidth","width","screenHeight","height","wp","hp","SPACING","FONT_SIZES","scaleDimension","scaleFont","getResponsiveDimension","Audio","AsyncStorage","AudioContext","BottomTabBar","GAME_SCORES","getExpForLevel","SPECIAL_AVATARS","jsxDEV","_jsxDEV","Fragment","_Fragment","pixelFont","pixelStroke","textShadowOffset","textShadowColor","textShadowRadius","defaultAvatar","require","avatarOptions","audioOnIcon","audioOffIcon","audioGame","UserCacheContext","useUserCache","ProfileScreen","_ref","_this","navigation","isTab","_useState","_useState2","_slicedToArray","currentUser","setCurrentUser","_useState3","_useState4","username","setUsername","_useState5","_useState6","avatar","setAvatar","_useState7","_useState8","level","setLevel","_useState9","_useState0","exp","setExp","_useState1","_useState10","expMax","setExpMax","_useState11","_useState12","modalVisible","setModalVisible","_useState13","_useState14","editName","setEditName","_useState15","_useState16","editAvatar","setEditAvatar","_useState17","_useState18","selectedAvatarIndex","setSelectedAvatarIndex","_useState19","_useState20","loggingOut","setLoggingOut","_useState21","_useState22","userCache","setUserCache","_useContext","audioOn","toggleAudio","unsubscribe","_ref2","_asyncToGenerator","user","displayName","userLevel","userExp","userDoc","uid","exists","_data$level","_data$exp","data","photoURL","uri","replace","_x","apply","arguments","activeTab","getState","route","routes","index","name","openEdit","cache","pickImage","_ref3","OS","input","document","createElement","type","accept","onchange","_ref4","e","file","target","files","storageRef","url","merge","error","console","_x2","click","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","assets","length","image","response","fetch","blob","saveEdit","_ref5","newName","trim","style","flex","backgroundColor","children","styles","root","justifyContent","alignItems","title","concat","fileName","_jsxFileName","lineNumber","columnNumber","Provider","value","contentContainerStyle","scrollContent","paddingBottom","showsVerticalScrollIndicator","avatarBox","source","resizeMode","usernameBox","levelBox","levelRow","levelText","expText","expBarBg","expBarFill","editBtn","activeOpacity","onPress","disabled","flexDirection","editBtnText","editIcon","tintColor","logoutBtn","alignSelf","marginTop","textStyle","logoutBtnText","visible","transparent","animationType","loadingOverlay","loadingBox","loadingText","size","color","onRequestClose","modalOverlay","modalBox","fontFamily","modalTitle","modalAvatarRow","map","img","i","modalAvatarOption","modalAvatarActive","modalAvatarImg","modalInput","onChangeText","maxLength","placeholder","placeholderTextColor","autoFocus","editAvatarBtn","editAvatarBtnText","modalBtnRowColumn","cancelBtn","cancelBtnText","onTabPress","tab","navigate","addTrikiWinExp","_addTrikiWinExp","userRef","triki","newLevel","updates","special","find","a","avatarSpecial","statsRef","statsDoc","prev","victorias","derrotas","missionReward","checkAndUpdateMissions","create","paddingTop","fontSize","Math","min","letterSpacing","marginBottom","textAlign","borderWidth","borderColor","borderRadius","padding","shadowColor","shadowOpacity","shadowRadius","shadowOffset","marginVertical","paddingHorizontal","paddingVertical","max","overflow","bottomTab","tabBtn","minHeight","tabBtnActive","borderBottomWidth","borderBottomColor","tabIcon","gap","marginHorizontal","marginLeft","cornerDotTL","position","top","left","zIndex","cornerDotTR","right","cornerDotBL","bottom","cornerDotBR","flexGrow","audioContainer","audioButton","audioText","audioIcon"],"sources":["C:/Users/Administrator/Documents/Tricade/src/views/ProfileScreen.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\r\nimport { View, Text, StyleSheet, Image, Dimensions, TouchableOpacity, Modal, TextInput, Pressable, Platform, SafeAreaView, ActivityIndicator, ScrollView } from 'react-native';\r\nimport RetroButton from '../components/RetroButton';\r\nimport userPinkIcon from '../assets/user-pink.png';\r\nimport { auth, db, storage } from '../firebaseConfig';\r\nimport { updateProfile, onAuthStateChanged, signOut } from 'firebase/auth';\r\nimport { ref, uploadBytes, getDownloadURL, getStorage } from 'firebase/storage';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { doc, getDoc, setDoc, increment, updateDoc } from 'firebase/firestore';\r\nimport editarRosaIcon from '../assets/editar_rosa.png';\r\nimport {\r\n  screenWidth as width,\r\n  screenHeight as height,\r\n  wp,\r\n  hp,\r\n  SPACING,\r\n  FONT_SIZES,\r\n  scaleDimension,\r\n  scaleFont,\r\n  getResponsiveDimension\r\n} from '../utils/dimensions';\r\nimport { Audio } from 'expo-av';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { AudioContext } from '../../App';\r\nimport BottomTabBar from '../components/BottomTabBar';\r\nimport { GAME_SCORES, getExpForLevel, SPECIAL_AVATARS } from '../utils/scoreConfig';\r\n\r\nconst pixelFont = 'PressStart2P_400Regular';\r\n\r\nconst pixelStroke = [\r\n  { textShadowOffset: { width: -4, height: 0 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: 4, height: 0 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: 0, height: -4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: 0, height: 4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: -4, height: -4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: 4, height: -4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: -4, height: 4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n  { textShadowOffset: { width: 4, height: 4 }, textShadowColor: '#000', textShadowRadius: 0 },\r\n];\r\n\r\nconst defaultAvatar = require('../assets/user-pink.png');\r\nconst avatarOptions = [\r\n  require('../assets/user-blue.png'),\r\n  require('../assets/user-pink.png'),\r\n];\r\n\r\nconst audioOnIcon = require('../assets/audio-on.png');\r\nconst audioOffIcon = require('../assets/audio-off.png');\r\nconst audioGame = require('../assets/audio-game.mp3');\r\n\r\n// Contexto global para el usuario\r\nexport const UserCacheContext = createContext();\r\nexport function useUserCache() { return useContext(UserCacheContext); }\r\n\r\nexport default function ProfileScreen({ navigation, isTab }) {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [username, setUsername] = useState('');\r\n  const [avatar, setAvatar] = useState(userPinkIcon);\r\n  const [level, setLevel] = useState(0);\r\n  const [exp, setExp] = useState(0);\r\n  const [expMax, setExpMax] = useState(600);\r\n\r\n  // Modal edición\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [editName, setEditName] = useState('');\r\n  const [editAvatar, setEditAvatar] = useState(null);\r\n  const [selectedAvatarIndex, setSelectedAvatarIndex] = useState(0);\r\n\r\n  const [loggingOut, setLoggingOut] = useState(false);\r\n\r\n  // Nuevo: usar caché global\r\n  const [userCache, setUserCache] = useState(null);\r\n\r\n  const { audioOn, toggleAudio } = useContext(AudioContext);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        setCurrentUser(user);\r\n        let displayName = user.displayName;\r\n        let userLevel = 0;\r\n        let userExp = 0;\r\n        // Si no hay nombre en Auth, intentar obtenerlo desde Firestore\r\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\r\n        if (userDoc.exists()) {\r\n          const data = userDoc.data();\r\n          displayName = data.displayName || displayName;\r\n          userLevel = data.level ?? 0;\r\n          userExp = data.exp ?? 0;\r\n          // Actualizar Auth con el nombre de Firestore\r\n          if (displayName && user.displayName !== displayName) {\r\n            await updateProfile(user, { displayName });\r\n          }\r\n        }\r\n        setUsername(displayName || '');\r\n        setEditName(displayName || '');\r\n        setLevel(userLevel);\r\n        setExp(userExp);\r\n        // Cargar avatar\r\n        if (user.photoURL) {\r\n          setAvatar({ uri: user.photoURL });\r\n        } else {\r\n          setAvatar(userPinkIcon);\r\n        }\r\n        // Guardar en caché global\r\n        setUserCache({\r\n          uid: user.uid,\r\n          displayName,\r\n          level: userLevel,\r\n          exp: userExp,\r\n          photoURL: user.photoURL || null,\r\n          avatar: user.photoURL ? { uri: user.photoURL } : userPinkIcon\r\n        });\r\n      } else {\r\n        if (!isTab) {\r\n          navigation.replace && navigation.replace('Login');\r\n        } else {\r\n          setCurrentUser(null);\r\n        }\r\n        setUserCache(null);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [navigation, isTab]);\r\n\r\n  // Detectar pantalla activa por navigation (si navigation.getState existe)\r\n  let activeTab = 'user';\r\n  if (navigation && navigation.getState) {\r\n    const route = navigation.getState().routes[navigation.getState().index];\r\n    if (route && route.name === 'Profile') activeTab = 'user';\r\n    else if (route && route.name === 'Games') activeTab = 'home';\r\n    else if (route && route.name === 'Home') activeTab = 'trophy';\r\n  }\r\n\r\n  // Usar caché global para el modal\r\n  const openEdit = () => {\r\n    const cache = userCache || {};\r\n    setEditName(cache.displayName || username);\r\n    setEditAvatar(cache.avatar || avatar);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  const pickImage = async () => {\r\n    if (Platform.OS === 'web') {\r\n      // En web, usamos un input file nativo\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = 'image/*';\r\n      input.onchange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n          try {\r\n            const storage = getStorage();\r\n            const storageRef = ref(storage, `avatars/${currentUser.uid}.jpg`);\r\n            await uploadBytes(storageRef, file);\r\n            const url = await getDownloadURL(storageRef);\r\n            await updateProfile(currentUser, { photoURL: url });\r\n            setAvatar({ uri: url });\r\n            // Guarda la URL en Firestore\r\n            if (currentUser && currentUser.uid) {\r\n              await setDoc(\r\n                doc(db, 'users', currentUser.uid),\r\n                { photoURL: url },\r\n                { merge: true }\r\n              );\r\n            }\r\n          } catch (error) {\r\n            console.error('Error al subir la imagen:', error);\r\n          }\r\n        }\r\n      };\r\n      input.click();\r\n    } else {\r\n      // En móvil, usamos expo-image-picker\r\n      let result = await ImagePicker.launchImageLibraryAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n        allowsEditing: true,\r\n        aspect: [1, 1],\r\n        quality: 0.7,\r\n      });\r\n      if (!result.canceled && result.assets && result.assets.length > 0) {\r\n        const image = result.assets[0];\r\n        try {\r\n          const storage = getStorage();\r\n          const storageRef = ref(storage, `avatars/${currentUser.uid}.jpg`);\r\n          const response = await fetch(image.uri);\r\n          const blob = await response.blob();\r\n          await uploadBytes(storageRef, blob);\r\n          const url = await getDownloadURL(storageRef);\r\n          await updateProfile(currentUser, { photoURL: url });\r\n          setAvatar({ uri: url });\r\n          // Guarda la URL en Firestore\r\n          if (currentUser && currentUser.uid) {\r\n            await setDoc(\r\n              doc(db, 'users', currentUser.uid),\r\n              { photoURL: url },\r\n              { merge: true }\r\n            );\r\n          }\r\n        } catch (error) {\r\n          console.error('Error al subir la imagen:', error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveEdit = async () => {\r\n    const newName = editName.trim() ? editName : username;\r\n    setUsername(newName);\r\n    setAvatar(editAvatar);\r\n    setModalVisible(false);\r\n    // Actualiza el nombre en Firebase Auth\r\n    await updateProfile(currentUser, { displayName: newName });\r\n    // Actualiza el nombre en Firestore\r\n    if (currentUser && currentUser.uid) {\r\n      await setDoc(\r\n        doc(db, 'users', currentUser.uid),\r\n        { displayName: newName },\r\n        { merge: true }\r\n      );\r\n    }\r\n  };\r\n\r\n  // Si no hay usuario, mostrar pantalla de carga o nada\r\n  if (!currentUser) {\r\n    return (\r\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#0a0a23' }}>\r\n        <View style={[styles.root, { justifyContent: 'center', alignItems: 'center' }]}>\r\n          <Text style={[styles.title, ...pixelStroke]}>Cargando...</Text>\r\n        </View>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <UserCacheContext.Provider value={userCache}>\r\n      <SafeAreaView style={{ flex: 1, backgroundColor: '#0a0a23' }}>\r\n        <View style={styles.root}>\r\n          <ScrollView contentContainerStyle={[styles.scrollContent, { paddingBottom: 120 }]} showsVerticalScrollIndicator={false}>\r\n            {/* Título */}\r\n            <Text style={[styles.title, ...pixelStroke]}>PERFIL DE USUARIO</Text>\r\n\r\n            {/* Avatar */}\r\n            <View style={styles.avatarBox}>\r\n              <Image source={avatar} style={styles.avatar} resizeMode=\"contain\" />\r\n            </View>\r\n\r\n            {/* Nombre de usuario */}\r\n            <View style={styles.usernameBox}>\r\n              <Text style={[styles.username, ...pixelStroke]}>{username}</Text>\r\n            </View>\r\n\r\n            {/* Nivel y barra de experiencia */}\r\n            <View style={styles.levelBox}>\r\n              <View style={styles.levelRow}>\r\n                <Text style={styles.levelText}>Nivel {level}</Text>\r\n                <Text style={styles.expText}>Exp {exp}/{expMax}</Text>\r\n              </View>\r\n              <View style={styles.expBarBg}>\r\n                <View style={[styles.expBarFill, { width: `${(exp/expMax)*100}%` }]} />\r\n              </View>\r\n            </View>\r\n\r\n            {/* Botón Editar perfil */}\r\n            <TouchableOpacity style={styles.editBtn} activeOpacity={0.7} onPress={openEdit} disabled={!currentUser}>\r\n              <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'center' }}>\r\n                <Text style={styles.editBtnText}>Editar perfil</Text>\r\n                <Image source={editarRosaIcon} style={styles.editIcon} resizeMode=\"contain\" />\r\n              </View>\r\n            </TouchableOpacity>\r\n\r\n            {/* Botón de audio */}\r\n            <TouchableOpacity style={styles.editBtn} activeOpacity={0.7} onPress={toggleAudio}>\r\n              <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'center' }}>\r\n                <Text style={styles.editBtnText}>{audioOn ? 'Apagar sonido' : 'Encender sonido'}</Text>\r\n                <Image \r\n                  source={audioOn ? audioOnIcon : audioOffIcon} \r\n                  style={[styles.editIcon, { tintColor: audioOn ? '#ff2e7e' : '#aaa' }]} \r\n                  resizeMode=\"contain\" \r\n                />\r\n              </View>\r\n            </TouchableOpacity>\r\n\r\n            {/* Botón Salir */}\r\n            {!loggingOut && (\r\n              <RetroButton \r\n                title=\"Salir\" \r\n                onPress={async () => {\r\n                  setLoggingOut(true);\r\n                  await signOut(auth);\r\n                  setLoggingOut(false);\r\n                  if (!isTab) {\r\n                    navigation.replace && navigation.replace('Login');\r\n                  } else {\r\n                    setCurrentUser(null);\r\n                  }\r\n                }} \r\n                style={[styles.logoutBtn, { alignSelf: 'center', width: '90%', marginTop: 18 }]}\r\n                textStyle={styles.logoutBtnText}\r\n              />\r\n            )}\r\n\r\n            {/* Loading modal al cerrar sesión */}\r\n            <Modal\r\n              visible={loggingOut}\r\n              transparent\r\n              animationType=\"fade\"\r\n            >\r\n              <View style={styles.loadingOverlay}>\r\n                <View style={styles.loadingBox}>\r\n                  <Text style={styles.loadingText}>Cerrando sesión...</Text>\r\n                  <View style={{ marginTop: 18 }}>\r\n                    <ActivityIndicator size=\"large\" color=\"#ff2e7e\" />\r\n                  </View>\r\n                </View>\r\n              </View>\r\n            </Modal>\r\n\r\n            {/* Modal edición perfil */}\r\n            <Modal\r\n              visible={modalVisible}\r\n              animationType=\"fade\"\r\n              transparent\r\n              onRequestClose={() => setModalVisible(false)}\r\n            >\r\n              <View style={styles.modalOverlay}>\r\n                <View style={styles.modalBox}>\r\n                  {(!username || !avatar) ? (\r\n                    <View style={{ alignItems: 'center', justifyContent: 'center', height: 120 }}>\r\n                      <ActivityIndicator size=\"large\" color=\"#00fff7\" />\r\n                      <Text style={{ color: '#00fff7', fontFamily: pixelFont, marginTop: 18 }}>Cargando perfil...</Text>\r\n                    </View>\r\n                  ) : (\r\n                    <>\r\n                      <Text style={[styles.modalTitle, ...pixelStroke]}>Editar perfil</Text>\r\n                      <View style={styles.modalAvatarRow}>\r\n                        {avatarOptions.map((img, i) => (\r\n                          <Pressable key={i} onPress={() => setEditAvatar(img)} style={[styles.modalAvatarOption, editAvatar === img && styles.modalAvatarActive]}> \r\n                            <Image source={img} style={styles.modalAvatarImg} resizeMode=\"contain\" />\r\n                          </Pressable>\r\n                        ))}\r\n                      </View>\r\n                      <TextInput\r\n                        style={styles.modalInput}\r\n                        value={editName}\r\n                        onChangeText={setEditName}\r\n                        maxLength={16}\r\n                        placeholder=\"Nombre de usuario\"\r\n                        placeholderTextColor=\"#00fff7\"\r\n                        autoFocus\r\n                      />\r\n                      <TouchableOpacity onPress={pickImage} style={styles.editAvatarBtn}>\r\n                        <Text style={styles.editAvatarBtnText}>Elegir foto de galería</Text>\r\n                      </TouchableOpacity>\r\n                      <View style={styles.modalBtnRowColumn}>\r\n                        <RetroButton title=\"Guardar\" onPress={saveEdit} />\r\n                        <RetroButton title=\"Cancelar\" onPress={() => setModalVisible(false)} style={styles.cancelBtn} textStyle={styles.cancelBtnText} />\r\n                      </View>\r\n                    </>\r\n                  )}\r\n                </View>\r\n              </View>\r\n            </Modal>\r\n          </ScrollView>\r\n          {/* Menú inferior siempre visible */}\r\n          {(!isTab) && (\r\n            <BottomTabBar\r\n              activeTab={activeTab}\r\n              onTabPress={(tab) => {\r\n                if (tab === 'trophy') navigation.navigate('Home');\r\n                if (tab === 'home') navigation.navigate('Games');\r\n                if (tab === 'user') navigation.navigate('Profile');\r\n              }}\r\n            />\r\n          )}\r\n        </View>\r\n      </SafeAreaView>\r\n    </UserCacheContext.Provider>\r\n  );\r\n}\r\n\r\nexport async function addTrikiWinExp() {\r\n  if (!auth.currentUser) return;\r\n  const userRef = doc(db, 'users', auth.currentUser.uid);\r\n  const userDoc = await getDoc(userRef);\r\n  let exp = 0, level = 0;\r\n  if (userDoc.exists()) {\r\n    exp = userDoc.data().exp || 0;\r\n    level = userDoc.data().level || 0;\r\n  }\r\n  // Sumar puntos por victoria en Triki\r\n  exp += GAME_SCORES.triki;\r\n  let newLevel = level;\r\n  let expMax = getExpForLevel(newLevel + 1);\r\n  // Subir solo un nivel por victoria\r\n  if (exp >= expMax) {\r\n    exp -= expMax;\r\n    newLevel += 1;\r\n  }\r\n  // Cambiar avatar si corresponde\r\n  let updates = { exp, level: newLevel };\r\n  const special = SPECIAL_AVATARS.find(a => a.level === newLevel);\r\n  if (special) {\r\n    updates.photoURL = null;\r\n    updates.avatarSpecial = special.image;\r\n  }\r\n  await setDoc(userRef, updates, { merge: true });\r\n\r\n  // Actualizar estadísticas y trofeos\r\n  const statsRef = doc(db, 'users', auth.currentUser.uid, 'trikiStats', 'stats');\r\n  const statsDoc = await getDoc(statsRef);\r\n  let prev = { victorias: 0, derrotas: 0 };\r\n  if (statsDoc.exists()) {\r\n    prev = statsDoc.data();\r\n  }\r\n  await setDoc(statsRef, {\r\n    victorias: prev.victorias + 1,\r\n    derrotas: prev.derrotas\r\n  }, { merge: true });\r\n\r\n  // Verificar misiones\r\n  const missionReward = await checkAndUpdateMissions(\r\n    auth.currentUser.uid,\r\n    'TRIKI',\r\n    {\r\n      victorias: prev.victorias + 1,\r\n      derrotas: prev.derrotas\r\n    }\r\n  );\r\n\r\n  // Si hay recompensa por misiones, sumarla al nivel\r\n  if (missionReward > 0) {\r\n    await updateDoc(userRef, { level: increment(missionReward) });\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  root: {\r\n    flex: 1,\r\n    backgroundColor: '#0a0a23',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    paddingTop: height * 0.04,\r\n    paddingBottom: 0,\r\n    width: '100%',\r\n    alignSelf: 'center',\r\n  },\r\n  title: {\r\n    color: '#fff',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.07, 22),\r\n    letterSpacing: 2,\r\n    marginBottom: height * 0.025,\r\n    textAlign: 'center',\r\n  },\r\n  avatarBox: {\r\n    borderWidth: width * 0.015,\r\n    borderColor: '#00fff7',\r\n    borderRadius: width * 0.08,\r\n    padding: width * 0.02,\r\n    backgroundColor: '#23233a',\r\n    alignSelf: 'center',\r\n    marginBottom: height * 0.018,\r\n    shadowColor: '#00fff7',\r\n    shadowOpacity: 0.45,\r\n    shadowRadius: 16,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  avatar: {\r\n    width: Math.min(width * 0.28, 80),\r\n    height: Math.min(width * 0.28, 80),\r\n    borderRadius: width * 0.06,\r\n  },\r\n  usernameBox: {\r\n    alignSelf: 'center',\r\n    marginVertical: height * 0.012,\r\n    borderWidth: width * 0.01,\r\n    borderColor: '#00fff7',\r\n    borderRadius: width * 0.03,\r\n    paddingHorizontal: width * 0.04,\r\n    paddingVertical: height * 0.01,\r\n    backgroundColor: '#23233a',\r\n  },\r\n  username: {\r\n    color: '#00fff7',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.055, 18),\r\n    textAlign: 'center',\r\n  },\r\n  levelBox: {\r\n    width: '90%',\r\n    alignSelf: 'center',\r\n    marginVertical: height * 0.018,\r\n    borderWidth: width * 0.01,\r\n    borderColor: '#00fff7',\r\n    borderRadius: width * 0.04,\r\n    backgroundColor: '#23233a',\r\n    padding: width * 0.03,\r\n  },\r\n  levelRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 6,\r\n  },\r\n  levelText: {\r\n    color: '#ff2e7e',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.045, 14),\r\n  },\r\n  expText: {\r\n    color: '#ff2e7e',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.035, 12),\r\n  },\r\n  expBarBg: {\r\n    width: '100%',\r\n    height: Math.max(10, height * 0.015),\r\n    backgroundColor: '#101926',\r\n    borderRadius: width * 0.03,\r\n    overflow: 'hidden',\r\n    borderWidth: width * 0.008,\r\n    borderColor: '#ff2e7e',\r\n  },\r\n  expBarFill: {\r\n    height: '100%',\r\n    backgroundColor: '#ff2e7e',\r\n    borderRadius: width * 0.03,\r\n  },\r\n  editBtn: {\r\n    width: '90%',\r\n    alignSelf: 'center',\r\n    marginTop: height * 0.012,\r\n    marginBottom: height * 0.012,\r\n    borderWidth: width * 0.01,\r\n    borderColor: '#00fff7',\r\n    borderRadius: width * 0.03,\r\n    backgroundColor: '#101926',\r\n    paddingVertical: height * 0.018,\r\n    paddingHorizontal: width * 0.04,\r\n  },\r\n  editBtnText: {\r\n    color: '#fff',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.038, 13),\r\n    textAlign: 'center',\r\n  },\r\n  bottomTab: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    width: '94%',\r\n    backgroundColor: 'transparent',\r\n    borderRadius: width * 0.045,\r\n    borderWidth: width * 0.01,\r\n    borderColor: '#00fff7',\r\n    paddingVertical: height * 0.012,\r\n    paddingHorizontal: width * 0.045,\r\n    alignSelf: 'center',\r\n    marginTop: 'auto',\r\n    shadowColor: '#00fff7',\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 10,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  tabBtn: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingVertical: height * 0.012,\r\n    minHeight: 40,\r\n  },\r\n  tabBtnActive: {\r\n    borderBottomWidth: 4,\r\n    borderBottomColor: '#ff2e7e',\r\n    shadowColor: '#ff2e7e',\r\n    shadowOpacity: 0.7,\r\n    shadowRadius: 10,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  tabIcon: {\r\n    width: width * 0.09,\r\n    height: width * 0.09,\r\n  },\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(10,10,35,0.92)',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  modalBox: {\r\n    width: Math.min(width * 0.88, 340),\r\n    backgroundColor: '#23233a',\r\n    borderRadius: Math.max(18, width * 0.045),\r\n    borderWidth: 4,\r\n    borderColor: '#00fff7',\r\n    padding: 22,\r\n    alignItems: 'center',\r\n    shadowColor: '#00fff7',\r\n    shadowOpacity: 0.45,\r\n    shadowRadius: 16,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  modalTitle: {\r\n    color: '#ff2e7e',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.055, 22),\r\n    marginBottom: 18,\r\n    textAlign: 'center',\r\n  },\r\n  modalAvatarRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 18,\r\n    gap: 12,\r\n  },\r\n  modalAvatarOption: {\r\n    borderWidth: 2,\r\n    borderColor: '#00fff7',\r\n    borderRadius: 16,\r\n    padding: 4,\r\n    marginHorizontal: 6,\r\n    backgroundColor: '#101926',\r\n  },\r\n  modalAvatarActive: {\r\n    borderColor: '#ff2e7e',\r\n    backgroundColor: '#18182e',\r\n    shadowColor: '#ff2e7e',\r\n    shadowOpacity: 0.7,\r\n    shadowRadius: 8,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  modalAvatarImg: {\r\n    width: 48,\r\n    height: 48,\r\n    borderRadius: 12,\r\n  },\r\n  modalInput: {\r\n    width: '90%',\r\n    borderWidth: 2,\r\n    borderColor: '#00fff7',\r\n    borderRadius: 10,\r\n    backgroundColor: '#101926',\r\n    color: '#00fff7',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.045, 18),\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 12,\r\n    marginBottom: 18,\r\n    textAlign: 'center',\r\n  },\r\n  modalBtnRowColumn: {\r\n    flexDirection: 'column',\r\n    width: '100%',\r\n    gap: 10,\r\n    marginTop: 8,\r\n  },\r\n  editAvatarBtn: {\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 18,\r\n    borderRadius: 8,\r\n    borderWidth: 2,\r\n    borderColor: '#00fff7',\r\n    backgroundColor: '#181828',\r\n    alignSelf: 'center',\r\n  },\r\n  editAvatarBtnText: {\r\n    color: '#00fff7',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.038, 16),\r\n    textAlign: 'center',\r\n  },\r\n  cancelBtn: {\r\n    backgroundColor: '#ff2e7e',\r\n    borderColor: '#ff2e7e',\r\n    marginTop: 6,\r\n  },\r\n  cancelBtnText: {\r\n    color: '#fff',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.038, 16),\r\n    textAlign: 'center',\r\n  },\r\n  logoutBtn: {\r\n    backgroundColor: '#ff2e7e',\r\n    borderColor: '#ff2e7e',\r\n    marginTop: 16,\r\n  },\r\n  logoutBtnText: {\r\n    color: '#fff',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.038, 16),\r\n    textAlign: 'center',\r\n  },\r\n  loadingOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(10,10,35,0.92)',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  loadingBox: {\r\n    backgroundColor: '#23233a',\r\n    borderRadius: 18,\r\n    borderWidth: 4,\r\n    borderColor: '#ff2e7e',\r\n    padding: 32,\r\n    alignItems: 'center',\r\n    shadowColor: '#ff2e7e',\r\n    shadowOpacity: 0.45,\r\n    shadowRadius: 16,\r\n    shadowOffset: { width: 0, height: 0 },\r\n  },\r\n  loadingText: {\r\n    color: '#ff2e7e',\r\n    fontFamily: pixelFont,\r\n    fontSize: Math.min(width * 0.045, 18),\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  editIcon: {\r\n    width: 28,\r\n    height: 28,\r\n    marginLeft: 14,\r\n    marginBottom: -3,\r\n  },\r\n  cornerDotTL: {\r\n    position: 'absolute',\r\n    top: hp(2.5),\r\n    left: wp(4),\r\n    width: scaleDimension(12),\r\n    height: scaleDimension(12),\r\n    backgroundColor: '#ff2e7e',\r\n    borderRadius: scaleDimension(6),\r\n    zIndex: 2,\r\n  },\r\n  cornerDotTR: {\r\n    position: 'absolute',\r\n    top: hp(2.5),\r\n    right: wp(4),\r\n    width: scaleDimension(12),\r\n    height: scaleDimension(12),\r\n    backgroundColor: '#00fff7',\r\n    borderRadius: scaleDimension(6),\r\n    zIndex: 2,\r\n  },\r\n  cornerDotBL: {\r\n    position: 'absolute',\r\n    bottom: hp(2.5),\r\n    left: wp(4),\r\n    width: scaleDimension(12),\r\n    height: scaleDimension(12),\r\n    backgroundColor: '#00fff7',\r\n    borderRadius: scaleDimension(6),\r\n    zIndex: 2,\r\n  },\r\n  cornerDotBR: {\r\n    position: 'absolute',\r\n    bottom: hp(2.5),\r\n    right: wp(4),\r\n    width: scaleDimension(12),\r\n    height: scaleDimension(12),\r\n    backgroundColor: '#ff2e7e',\r\n    borderRadius: scaleDimension(6),\r\n    zIndex: 2,\r\n  },\r\n  scrollContent: {\r\n    flexGrow: 1,\r\n    paddingBottom: height * 0.04,\r\n  },\r\n  audioContainer: {\r\n    width: '100%',\r\n    alignItems: 'center',\r\n    paddingVertical: 10,\r\n    backgroundColor: '#0a0a23',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#18182e',\r\n  },\r\n  audioButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    width: '90%',\r\n    backgroundColor: '#18182e',\r\n    borderRadius: 10,\r\n    borderWidth: 2,\r\n    borderColor: '#00fff7',\r\n    padding: 12,\r\n  },\r\n  audioText: {\r\n    color: '#fff',\r\n    fontFamily: pixelFont,\r\n    fontSize: 20,\r\n  },\r\n  audioIcon: {\r\n    width: 32,\r\n    height: 32,\r\n    marginLeft: 8,\r\n  },\r\n}); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}